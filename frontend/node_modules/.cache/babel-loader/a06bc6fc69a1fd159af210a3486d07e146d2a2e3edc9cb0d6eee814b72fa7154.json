{"ast":null,"code":"import _toConsumableArray from\"/home/abhinav/ALL PROJECTS/attendancesystemiiitu/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/home/abhinav/ALL PROJECTS/attendancesystemiiitu/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/abhinav/ALL PROJECTS/attendancesystemiiitu/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/home/abhinav/ALL PROJECTS/attendancesystemiiitu/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/abhinav/ALL PROJECTS/attendancesystemiiitu/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Navi from'../Navi';import useAuth from'../realm/useAuth';import Button from'@mui/material/Button';import DataTable from\"react-data-table-component\";import{useEffect,useState}from'react';import*as React from'react';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function StudentPanel(){var _useAuth=useAuth(),auth=_useAuth.auth;var _useState=useState([{}]),_useState2=_slicedToArray(_useState,2),coursesData=_useState2[0],setCoursesData=_useState2[1];var _useState3=useState({name:\"\",id:\"\",present:\"\",absent:\"\",per:null}),_useState4=_slicedToArray(_useState3,2),attendance1=_useState4[0],setAttendance1=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),viewAttendance1=_useState6[0],setViewAttendance1=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),row=_useState8[0],setRow=_useState8[1];var current=new Date();var date=\"\".concat(current.getDate(),\"-0\").concat(current.getMonth()+1,\"-\").concat(current.getFullYear());useEffect(function(){fetchData();},[]);useEffect(function(){setRow([_objectSpread({},attendance1)]);},[attendance1]);function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"/api/getCourses/\".concat(auth.studentId),{method:'GET',headers:{'Content-Type':'application/json'}}).then(function(res){return res.json();}).then(function(res){var courseData=res.data.coursesStudentEnrolledIn;console.log(courseData);setCoursesData(_toConsumableArray(courseData));});case 2:case\"end\":return _context2.stop();}},_callee2);}));return _fetchData.apply(this,arguments);}var getAttendance=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(courseId,courseName){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:fetch(\"/api/viewAttendance/\".concat(courseId,\"/\").concat(auth.studentId),{method:'GET',headers:{\"Content-Type\":\"application/json\"}}).then(function(res){return res.json();}).then(function(res){console.log(res);var present=res.p;var absent=res.a;var sname=res.studentName;var sid=res.studentId;var p=parseInt(present);var a=parseInt(absent);var per=p/(p+a)*100;per=per.toFixed(2);setAttendance1({courseName:courseName,name:sname,id:sid,present:present,absent:absent,per:per,date:date});setViewAttendance1(true);}).catch(function(err){if(!err.response.status===400)console.log(\"Error! Try again later\");else console.log(\"Invalid request\");});case 1:case\"end\":return _context.stop();}},_callee);}));return function getAttendance(_x,_x2){return _ref.apply(this,arguments);};}();var columns=[{name:\"S.no\",style:{fontSize:\"18px\"},selector:function selector(row){return\"1\";}},{name:\"Date\",with:\"30px\",style:{fontSize:\"18px\"},selector:function selector(row){return row.date;}},{name:\"CourseName\",width:\"400px\",style:{fontSize:\"18px\"},selector:function selector(row){return row.courseName;}},{name:\"Student Id\",style:{fontSize:\"18px\"},selector:function selector(row){return row.id;}},{name:\"Present\",style:{fontSize:\"18px\"},selector:function selector(row){return row.present;}},{name:\"Absent\",style:{fontSize:\"18px\"},selector:function selector(row){return row.absent;}},{name:\"Percentage\",style:{fontSize:\"18px\"},selector:function selector(row){return row.per;}}];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navi,{type:\"logout\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{style:{height:\"600px\"},children:[/*#__PURE__*/_jsx(\"center\",{style:{margin:\"40px\",marginBottom:\"80px\",fontSize:\"40px\"},children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Welcome \",auth.name,\" !!\"]})}),coursesData.map(function(course,key){return/*#__PURE__*/_jsxs(Button,{style:{marginLeft:\"20px\"},variant:\"contained\",onClick:function onClick(){return getAttendance(course.courseId,course.courseName);},children:[\"View Attendance for \",course.courseId,/*#__PURE__*/_jsx(\"br\",{}),course.courseName]},key);}),viewAttendance1&&/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",marginTop:\"40px\"},children:/*#__PURE__*/_jsx(\"div\",{style:{height:900,width:'100%'},children:/*#__PURE__*/_jsx(DataTable,{title:\"\".concat(auth.name,\"'s Attendance For subject - \").concat(attendance1.courseName,\" is :-\"),columns:columns,data:row,fixedHeader:true,highlightOnHover:true})})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/courses\",children:/*#__PURE__*/_jsx(\"img\",{src:\"Foot.png\"})})})]});}","map":{"version":3,"names":["Navi","useAuth","Button","DataTable","useEffect","useState","React","Link","StudentPanel","auth","coursesData","setCoursesData","name","id","present","absent","per","attendance1","setAttendance1","viewAttendance1","setViewAttendance1","row","setRow","current","Date","date","getDate","getMonth","getFullYear","fetchData","fetch","studentId","method","headers","then","res","json","courseData","data","coursesStudentEnrolledIn","console","log","getAttendance","courseId","courseName","p","a","sname","studentName","sid","parseInt","toFixed","catch","err","response","status","columns","style","fontSize","selector","with","width","height","margin","marginBottom","map","course","key","marginLeft","marginTop"],"sources":["/home/abhinav/ALL PROJECTS/attendancesystemiiitu/frontend/src/pages/StudentPanel.js"],"sourcesContent":["\nimport Navi from '../Navi';\nimport useAuth from '../realm/useAuth';\nimport Button from '@mui/material/Button';\nimport DataTable from \"react-data-table-component\";\nimport { useEffect, useState } from 'react';\nimport * as React from 'react';\nimport { Link } from 'react-router-dom';\n\n\nexport default function StudentPanel() {\n\n    const { auth } = useAuth();\n    const [coursesData, setCoursesData] = useState([{}]);\n    const [attendance1, setAttendance1] = useState({ name: \"\", id: \"\", present: \"\", absent: \"\", per: null });\n    const [viewAttendance1, setViewAttendance1] = useState(false);\n    const [row, setRow] = useState();\n    const current = new Date();\n    const date = `${current.getDate()}-0${current.getMonth() + 1}-${current.getFullYear()}`;\n\n\n\n\n    useEffect(() => {\n        fetchData();\n    }, [])\n\n    useEffect(() => {\n        setRow([{ ...attendance1 }]);\n    }, [attendance1])\n\n    async function fetchData() {\n        await fetch(`/api/getCourses/${auth.studentId}`, {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => res.json())\n            .then((res) => {\n                var courseData = res.data.coursesStudentEnrolledIn\n                console.log(courseData)\n                setCoursesData([...courseData]);\n            })\n    }\n\n    const getAttendance = async (courseId, courseName) => {\n\n        fetch(`/api/viewAttendance/${courseId}/${auth.studentId}`, {\n            method: 'GET',\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n        })\n            .then(res => res.json())\n            .then((res) => {\n                console.log(res)\n                const present = res.p\n                const absent = res.a\n                const sname = res.studentName\n                const sid = res.studentId\n                var p = parseInt(present)\n                var a = parseInt(absent)\n                var per = (p / (p + a)) * 100;\n                per = per.toFixed(2)\n                setAttendance1({ courseName: courseName, name: sname, id: sid, present: present, absent: absent, per: per, date: date });\n                setViewAttendance1(true);\n            })\n            .catch((err) => {\n                if (!err.response.status === 400)\n                    console.log(\"Error! Try again later\");\n                else\n                    console.log(\"Invalid request\")\n            })\n    }\n\n    const columns = [\n        {\n            name: \"S.no\",\n            style: { fontSize: \"18px\" },\n            selector: row => \"1\",\n        },\n        {\n            name: \"Date\",\n            with: \"30px\",\n            style: { fontSize: \"18px\" },\n            selector: row => row.date\n        },\n        {\n            name: \"CourseName\",\n            width: \"400px\",\n            style: { fontSize: \"18px\" },\n            selector: row => row.courseName\n        },\n        {\n            name: \"Student Id\",\n            style: { fontSize: \"18px\" },\n            selector: row => row.id,\n        },\n        {\n            name: \"Present\",\n            style: { fontSize: \"18px\" },\n            selector: row => row.present\n        },\n        {\n            name: \"Absent\",\n            style: { fontSize: \"18px\" },\n            selector: row => row.absent\n        },\n        {\n            name: \"Percentage\",\n            style: { fontSize: \"18px\" },\n            selector: row => row.per\n        },\n    ]\n\n    return (\n        <>\n            <Navi type={\"logout\"} /><br />\n            <div style={{height:\"600px\"}}>\n                <center style={{margin:\"40px\", marginBottom:\"80px\",fontSize:\"40px\"}}><strong>Welcome {auth.name} !!</strong></center>\n                {coursesData.map((course, key) => {\n                    return (\n                        <Button style={{marginLeft:\"20px\"}} key={key} variant=\"contained\" onClick={() => getAttendance(course.courseId, course.courseName)}>View Attendance for {course.courseId}<br />{course.courseName}</Button>\n                    )\n                })}\n\n                {viewAttendance1 && <div style={{ width: \"100%\", marginTop: \"40px\" }}>\n                    <div style={{ height: 900, width: '100%' }}>\n                        <DataTable\n                            title={`${auth.name}'s Attendance For subject - ${attendance1.courseName} is :-`}\n                            columns={columns}\n                            data={row}\n                            fixedHeader\n                            highlightOnHover\n                        />\n                    </div>\n                </div>}\n            </div>\n\n            <div>\n                <Link to={\"/courses\"}>\n                    <img src=\"Foot.png\" />\n                </Link>\n            </div>\n\n        </>\n    )\n}\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}